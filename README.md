# imgs2vid

## Требования

-   **ffmpeg** version 4.4
-   **node.js** version 16.1.0

## Стэк технологий

### Backend

-   Node.js
-   Express.js
-   fluent-ffmpeg
-   multer
-   cors

### Frontend

-   CRA
-   react-dropzone
-   react-loader-spinner

## Установка

1. git clone https://github.com/PhillJK/imgs2vid.git
2. Перейти в папку **client** и установить пакеты `npm install`
3. После установки: запустить программу `npm start`
4. Тоже самое надо проделать и для папки **server**
5. **client** будет запущен на порту **3000**, а **server** на порту **5000**

## О проекте

Сервером является обычный Node/Express. Клиент использует React, а для получения файлов, используется пакет react-dropzone, так как оно дает хорошую абстракцию, для работы с React. После получения файлов запускается функция `handleDrop`, который меняет состояние программы на `loading` и отправляет файлы на сервер.

На серверной части, для конвертирования картинок в видео используется библиотека fluent-ffmpeg, так как оно упращает работу с ffmpeg'ом, над которым оно базируется. Для получения файлов с клиента используется посредник multer. Multer также проверяет, являются ли файлы картинами, и сохраняет их в папке temp. После этого сервер проверяет, имеют ли все картины одно расширение; это делается из-за моей неопытности с работой над библиотекой fluent-ffmpeg, я пока не нашел решение этой проблемы. Далее начинается конвертирование, после чего видео отправляется к клиенту, а ненужные файлы удаляются.

Клиент в свою очередь, после получения данных, останавливает спиннер и выводит на экран видео или ошибку.

## Улучшения

-   В первую очередь я использовал бы Web Assembly, чтобы конвертирование происходило на клиенсткой части. Это не только даст пользователю конвертировать картинки в видео оффлайн, но также снимит тяжёлую работу с сервера.

-   Также решил бы проблему с расширениями картинок

-   Добавил бы кнопку для скачивания видео

-   Добавил бы возможность выбрать формат видео

-   Добавил бы возможность авторизации, чтобы пользователь мог сохранять видео на сайте
